import{c,o as l,a as e,_ as ie,t,q as te,D as W,n as N,u as Y,v as de,d as O,p as T,b as u,w as k,g as d,a1 as G,a2 as A,a3 as q,l as j,A as U,Y as F,F as M,r as I,h as z,a8 as Z,a6 as H,Z as J,a4 as se,ab as ce,ac as L,ad as ue,j as ae,ae as me,f as K,af as Q,a0 as pe,E as fe,s as oe,B as ve,z as ge,y as he,e as ye}from"./app-pLCqbBD1.js";import{_ as xe}from"./AuthPageHeader-CQ1D0bYg.js";import{_ as be}from"./OrderConfirmModal-BmXfcoD3.js";import{r as _e}from"./ExclamationTriangleIcon-pDgKcEXb.js";import{r as we}from"./HomeIcon-BNcYVLLu.js";function $e(o,f){return l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const ke={class:"p-4 lg:p-6 bg-white rounded-xl flex flex-col"},Ce={class:"flex gap-1 justify-between items-center"},Pe={class:"text-sm sm:text-base font-normal shrink-0"},Oe={class:"text-slate-500"},Se={class:"text-blue-500"},je={class:"flex items-center gap-1 sm:gap-3 mt-1 sm:mt-0 flex-wrap"},De={class:"inline-flex gap-2 text-sm md:text-base leading-tight text-ellipsis"},ze={class:"text-slate-500 shrink-0"},Me={class:"text-slate-950 whitespace-nowrap text-ellipsis overflow-hidden"},Re={class:"flex gap-2"},Ae={class:"text-slate-500 text-sm md:text-base font-normal leading-normal"},Ie={class:"text-slate-950 text-sm md:text-base font-normal leading-normal"},Ve={__name:"OrderDetailsOrderStatus",props:{order:Object},setup(o){return(f,n)=>(l(),c("div",ke,[e("div",Ce,[e("div",Pe,[e("span",Oe,t(f.$t("Order ID")),1),e("span",Se,t(o.order.order_code),1)]),e("div",{class:te(["text-xs sm:text-sm font-normal px-2 py-1 rounded-[10px] inline-block text-ellipsis overflow-hidden",o.order.order_status])},t(o.order.order_status),3)]),e("div",je,[e("div",De,[e("span",ze,t(f.$t("Placed on")),1),e("span",Me,t(o.order.placed_at),1)]),n[0]||(n[0]=e("div",{class:"w-2 h-2 bg-slate-300 rounded-full hidden sm:block"},null,-1)),e("div",Re,[e("div",Ae,t(f.$t("Esd. delivery")),1),e("div",Ie,t(o.order.estimated_delivery_date),1)])])]))}},Be=ie(Ve,[["__scopeId","data-v-bdff76e1"]]),Ee={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Te={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},Ue={class:"bg-white p-5 sm:p-8 text-center"},Ne={class:"text-slate-600 py-2 block text-md font-medium border-b"},Le={class:"mt-3 flex flex-wrap gap-4 items-center justify-center"},We={key:0,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer grow max-w-40",title:"Cash on delivery"},Ye={class:"flex items-center"},Ge={class:"text-slate-600 text-xl overflow-hidden whitespace-nowrap text-ellipsis"},qe=["for"],He=["id","value"],Xe={class:""},Fe=["src"],Ze={class:"mt-5 w-full grow flex justify-end border-t pt-2"},Je={key:0},Ke={key:1,type:"button",class:"px-4 py-3 md:py-4 bg-primary-300 rounded-lg text-primary text-base font-medium flex items-center gap-1",disabled:""},Qe={key:1},et={key:1,type:"button",class:"px-4 py-3 md:py-4 bg-primary-300 rounded-lg text-primary text-base font-medium flex items-center gap-1",disabled:""},tt={__name:"OrderDetailsPaymentAndAgainOrder",props:{order:Object,againOrder:Boolean,makePayment:Boolean},emits:["update:makePayment","update:orderAgain","update:paymentSuccess"],setup(o,{emit:f}){const n=W(),C=N(),m=Y(),h=de(),i=o,v=O(!1),y=O(null),r=O(!1),p=O(!1),g=O(!1),w=f;T(()=>i.makePayment,()=>{i.makePayment===!0&&(v.value=!0)}),T(()=>i.againOrder,()=>{i.againOrder===!0&&(v.value=!0)}),T(()=>v.value,()=>{v.value===!1&&(w("update:makePayment",!1),w("update:orderAgain",!1))});const b=()=>{if(y.value==null){n.error("Please select payment method",{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"});return}p.value=!0,axios.get("/order-payment/"+i.order.id+"/"+y.value,{headers:{Authorization:C.token}}).then(_=>{_.data.data.order_payment_url&&(w("update:makePayment",!1),v.value=!1,p.value=!1,g.value=!0,V(_.data.data.order_payment_url))}).catch(_=>{p.value=!1,n.error(_.response.data.message,{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"})})},a={component:J,props:{title:"Order Placed",message:"Your order has been placed successfully."}},s=()=>{if(y.value==null){n.error("Please select payment method",{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"});return}r.value=!0,axios.post("/place-order/again",{order_id:i.order.id,payment_method:y.value},{headers:{Authorization:C.token}}).then(_=>{w("update:orderAgain",!1),w("update:makePayment",!1),r.value=!1,v.value=!1,n(a,{type:"default",hideProgressBar:!0,icon:!1,position:m.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});const x=_.data.data.order_payment_url;x&&V(x)})},D={component:J,props:{title:"Payment Success!",message:"Your payment has been successfully completed."}},V=_=>{let x=700,S=700,R=screen.width/2-x/2,B=screen.height/2-S/2,E="popup,resizable,height="+S+",width="+x+",top="+B+",left="+R;var P=window.open(_,null,E);if(P.title="Payment Window Screen - Make Payment",P.onload=()=>{P.title="Payment Window Screen - Make Payment"},P.focus(),P.closed){n.error("Payment Canceled",{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"}),g.value=!1,router.push("/order-history");return}var $=setInterval(re,1e3);function re(){try{if(P.closed||!P){clearInterval($),P.close(),h.orderPaymentCancelModal=!0,n.error("Payment Canceled",{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"}),g.value=!1,router.push("/order-history");return}var X=P.location.pathname.replace(/\/order\/\d+/,"");if(X=="/payment/cancel"){clearInterval($),g.value=!1,setTimeout(()=>{P.close(),h.orderPaymentCancelModal=!0,n.error("Payment Canceled",{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"}),router.push("/order-history")},8e3);return}if(X=="/payment/success"){if(P.close(),clearInterval($),n(D,{type:"default",hideProgressBar:!0,icon:!1,position:m.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),g.value){g.value=!1,w("update:paymentSuccess",!0);return}router.push("/order-history");return}}catch{}}setTimeout(()=>{clearInterval($),P.close(),g.value=!1,router.push("/order-history")},18e4)};return(_,x)=>(l(),c("div",null,[u(d(H),{as:"template",show:v.value},{default:k(()=>[u(d(G),{as:"div",class:"relative z-10",onClose:x[2]||(x[2]=S=>v.value=!1)},{default:k(()=>[u(d(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:k(()=>x[3]||(x[3]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1}),e("div",Ee,[e("div",Te,[u(d(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:k(()=>[u(d(q),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-xl"},{default:k(()=>[e("div",Ue,[e("span",Ne,t(_.$t("Available Payment Gateways")),1),e("div",Le,[o.againOrder&&d(m).cashOnDelivery?(l(),c("label",We,[U(e("input",{"onUpdate:modelValue":x[0]||(x[0]=S=>y.value=S),id:"cash",name:"paymentGateway",type:"radio",class:"sr-only",value:"cash"},null,512),[[F,y.value]]),e("div",Ye,[x[4]||(x[4]=e("img",{src:"/assets/icons/money-2.svg",alt:"",class:"w-12 h-16 object-contain"},null,-1)),e("span",Ge,t(_.$t("Cash On Delivery")),1)])])):j("",!0),d(m).onlinePayment?(l(!0),c(M,{key:1},I(d(m).paymentGateways,S=>(l(),c("label",{key:S.id,for:S.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer grow max-w-40"},[U(e("input",{"onUpdate:modelValue":x[1]||(x[1]=R=>y.value=R),id:S.name,name:"paymentGateway",type:"radio",class:"sr-only",value:S.name},null,8,He),[[F,y.value]]),e("div",Xe,[e("img",{src:S.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,Fe)])],8,qe))),128)):j("",!0)]),e("div",Ze,[i.makePayment?(l(),c("div",Je,[p.value?(l(),c("button",Ke,[u(Z),z(" "+t(_.$t("Processing"))+"... ",1)])):(l(),c("button",{key:0,class:"px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium",onClick:b},t(_.$t("Confirm Payment")),1))])):j("",!0),i.againOrder?(l(),c("div",Qe,[r.value?(l(),c("button",et,[u(Z),z(" "+t(_.$t("Processing"))+"... ",1)])):(l(),c("button",{key:0,class:"px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium",onClick:s},t(_.$t("Make Order Payment")),1))])):j("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),u(be)]))}},st={class:"bg-white rounded-lg md:rounded-2xl border border-slate-100 p-3 md:p-4 xl:p-6"},at={class:"text-slate-950 text-lg md:text-xl font-medium"},ot={class:"my-4 flex justify-between gap-4"},nt={class:"text-slate-950 text-sm sm:text-base font-normal"},rt={class:"text-slate-950 text-sm sm:text-base font-normal"},lt={class:"my-4 flex justify-between gap-4"},it={class:"text-slate-950 text-sm sm:text-base font-normal"},dt={class:"text-slate-950 text-sm sm:text-base font-normal"},ct={class:"my-4 flex justify-between gap-4"},ut={class:"text-red-500 text-sm sm:text-base font-normal"},mt={class:"text-slate-950 text-sm sm:text-base font-normal"},pt={class:"my-4 flex justify-between gap-4"},ft={class:"text-slate-950 text-sm sm:text-base font-normal"},vt={class:"text-slate-950 text-sm sm:text-base font-normal"},gt={key:0,class:"p-3 bg-slate-100 text-black rounded-lg mb-2"},ht={class:"text-sm sm:text-base font-medium mb-2"},yt={class:"space-y-2"},xt={class:"font-medium"},bt={class:"font-medium"},_t={class:"mt-4 p-3 bg-slate-200 rounded-lg"},wt={class:"text-sm sm:text-base font-medium"},$t={class:"text-base font-bold"},kt={class:"my-4 flex justify-between gap-4"},Ct={class:"text-slate-950 text-base sm:text-lg tracking-tight font-medium"},Pt={class:"text-slate-950 text-base sm:text-lg tracking-tight"},Ot={class:"bg-slate-50 rounded md:rounded-lg border border-slate-100 p-2 lg:p-4 mt-2 flex flex-col gap-1 lg:gap-2"},St={class:"text-slate-500 text-xs font-normal"},jt={class:"text-slate-950 text-sm md:text-lg font-medium leading-tight flex items-center justify-between flex-wrap"},Dt={key:0,class:"text-red-500 text-sm font-normal bg-red-100 p-1 rounded-md flex gap-1 items-center"},zt={key:1,class:"bg-emerald-500 text-sm font-normal text-white p-1 rounded-md flex items-center"},Mt={class:"flex flex-wrap gap-2 mt-2 items-center justify-center"},Rt={class:"text-center text-primary text-xs md:text-sm font-normal underline leading-tight"},At={class:"text-center text-primary text-xs md:text-sm font-normal underline leading-tight"},It={class:"flex items-center gap-2"},Vt={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Bt={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},Et={class:"bg-white p-5 sm:p-8 text-center"},Tt={class:"bg-red-500 w-14 h-14 md:w-20 md:h-20 rounded-full mx-auto flex justify-center items-center"},Ut={class:"mt-3 text-center text-gray-900 text-2xl md:text-3xl font-bold"},Nt={class:"mt-4 text-center text-slate-700 text-base md:text-xl font-normal"},Lt={class:"flex justify-between items-center gap-4 mt-8"},Wt={__name:"OrderDetailsSummery",props:{order:Object},emits:["update:paymentSuccess"],setup(o,{emit:f}){const n=Y(),C=W(),m=N(),h=O(!1),i=O(!1),v=O(!1);O(!1);const y=f,r=()=>{y("update:paymentSuccess",!0)},p=o,g=()=>{axios.post("/orders/cancel",{order_id:p.order.id},{headers:{Authorization:m.token}}).then(a=>{C.success(a.data.message,{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),m.orderCancel=!0}),h.value=!1},w=()=>{p.order.invoice_url?window.open(p.order.invoice_url,"_blank"):C.error("Invoice not found",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"})},b=()=>{var a;(a=p.order)!=null&&a.payment_receipt_url?window.open(p.order.payment_receipt_url,"_blank"):C.error("Payment Slip not found",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"})};return(a,s)=>{var D,V,_,x,S,R,B,E,P;return l(),c("div",null,[e("div",st,[e("div",at,t(a.$t("Order Summary")),1),e("div",ot,[e("div",nt,t(a.$t("Items")),1),e("div",rt,t(o.order.quantity),1)]),e("div",lt,[e("div",it,t(a.$t("Subtotal")),1),e("div",dt,t(d(n).showCurrency((D=o.order)==null?void 0:D.total_amount)),1)]),e("div",ct,[e("div",ut,t(a.$t("Discount")),1),e("div",mt," -"+t(d(n).showCurrency((V=o.order)==null?void 0:V.coupon_discount)),1)]),e("div",pt,[e("div",ft,t(a.$t("Shipping Charge")),1),e("div",vt,t(d(n).showCurrency((_=o.order)==null?void 0:_.delivery_charge)),1)]),((x=o.order.all_vat_taxes)==null?void 0:x.length)>0||((S=o.order)==null?void 0:S.tax_amount)>0?(l(),c("div",gt,[e("h2",ht,t(a.$t("VAT & Taxes Summary")),1),e("div",yt,[(l(!0),c(M,null,I(o.order.all_vat_taxes,$=>(l(),c("div",{key:$.id,class:"flex justify-between bg-slate-200 p-2 rounded-lg"},[e("span",xt,[z(t($.name)+" ",1),e("small",null,"("+t($.percentage)+"%)",1)]),e("span",bt,t(d(n).showCurrency($.amount)),1)]))),128))]),e("div",_t,[e("h3",wt,t(a.$t("Total Tax Amount"))+": ",1),e("p",$t,t(d(n).showCurrency((R=o.order)==null?void 0:R.tax_amount)),1)])])):j("",!0),s[9]||(s[9]=e("div",{class:"w-full h-[0px] border border-slate-400"},null,-1)),e("div",kt,[e("div",Ct,t(a.$t("Total Amount")),1),e("div",Pt,t(d(n).showCurrency((B=o.order)==null?void 0:B.payable_amount)),1)]),e("div",Ot,[e("div",St,t(a.$t("PAYMENT METHOD")),1),e("div",jt,[z(t(o.order.payment_method)+" ",1),o.order.payment_status==="Pending"?(l(),c("span",Dt,[u(d(_e),{class:"w-5 h-5"}),z(" "+t(o.order.payment_status),1)])):j("",!0),o.order.payment_status==="Paid"?(l(),c("span",zt,[u(d($e),{class:"w-5 h-5"}),z(" "+t(o.order.payment_status),1)])):j("",!0)])]),e("div",Mt,[e("button",{class:"p-2 lg:p-4 flex gap-1 lg:gap-2 items-center justify-center",onClick:b},[s[7]||(s[7]=e("img",{src:"/assets/icons/cloud.svg",alt:"download",class:"w-4 h-4 md:w-6 md:h-6"},null,-1)),e("span",Rt,t(a.$t("Payment Slip")),1)]),e("button",{class:"p-2 lg:p-4 flex gap-1 lg:gap-2 items-center justify-center",onClick:w},[s[8]||(s[8]=e("img",{src:"/assets/icons/cloud.svg",alt:"download",class:"w-4 h-4 md:w-6 md:h-6"},null,-1)),e("span",At,t(a.$t("Download Invoice")),1)])])]),e("div",It,[o.order.order_status==="Pending"?(l(),c("button",{key:0,class:"mt-2 px-4 py-3 md:py-4 bg-white rounded-lg text-slate-700 text-base font-medium grow",onClick:s[0]||(s[0]=$=>h.value=!0)},t(a.$t("Cancel Order")),1)):j("",!0),((E=p.order)==null?void 0:E.payment_status)=="Pending"&&((P=p.order)==null?void 0:P.payment_method)=="Online Payment"?(l(),c("button",{key:1,class:"mt-2 px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium grow",onClick:s[1]||(s[1]=$=>v.value=!0)},t(a.$t("Make Payment")),1)):j("",!0)]),o.order.order_status==="Delivered"?(l(),c("button",{key:0,class:"w-full mt-2 px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium",onClick:s[2]||(s[2]=$=>i.value=!0)},t(a.$t("Order Again")),1)):j("",!0),u(d(H),{as:"template",show:h.value},{default:k(()=>[u(d(G),{as:"div",class:"relative z-10",onClose:s[4]||(s[4]=$=>h.value=!1)},{default:k(()=>[u(d(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:k(()=>s[10]||(s[10]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1}),e("div",Vt,[e("div",Bt,[u(d(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:k(()=>[u(d(q),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:k(()=>[e("div",Et,[e("div",Tt,[u(d(se),{class:"w-8 h-8 md:w-12 md:h-12 text-white"})]),e("div",Ut,t(a.$t("Cancel the Order"))+"! ",1),e("div",Nt,t(a.$t("Are you sure want to cancel this order"))+"? ",1),e("div",Lt,[e("button",{class:"text-slate-800 grow text-base font-medium px-4 py-3 md:px-6 md:py-4 rounded-lg md:rounded-[10px] border border-slate-300",onClick:s[3]||(s[3]=$=>h.value=!1)},t(a.$t("Cancel")),1),e("button",{class:"text-white grow bg-red-500 text-base font-medium px-4 py-3 md:px-6 md:py-4 rounded-lg md:rounded-[10px]",onClick:g},t(a.$t("Yes")),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),u(tt,{order:o.order,makePayment:v.value,againOrder:i.value,"onUpdate:makePayment":s[5]||(s[5]=$=>v.value=!1),"onUpdate:orderAgain":s[6]||(s[6]=$=>i.value=!1),"onUpdate:paymentSuccess":r},null,8,["order","makePayment","againOrder"])])}}};(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".vue3-star-ratings[data-v-7fab3f62]{width:fit-content;overflow:hidden;position:relative;white-space:nowrap}.vue3-star-ratings *[data-v-7fab3f62]{box-sizing:border-box;margin:0;padding:0;line-height:1}.vue3-star-ratings__inner[data-v-7fab3f62],.vue3-star-ratings__outer[data-v-7fab3f62]{height:inherit}.vue3-star-ratings__outer[data-v-7fab3f62]{position:absolute;top:0;left:0;width:var(--vue3StarRatingOuterWidth);max-width:100%;overflow:hidden;color:var(--vue3StarRatingsOuterColor);transition:width .32s cubic-bezier(.075,.82,.165,1)}.vue3-star-ratings__inner[data-v-7fab3f62]{color:var(--vue3StarRatingsInnerColor)}.vue3-star-ratings__icon[data-v-7fab3f62]{fill:currentColor;width:var(--vue3StarRatingIconSize);aspect-ratio:1;cursor:pointer;display:inline-block}")),document.head.appendChild(o)}}catch(f){console.error("vite-plugin-css-injected-by-js",f)}})();const ne=(o,f)=>{const n=o.__vccOpts||o;for(const[C,m]of f)n[C]=m;return n},Yt={},Gt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.002 512.002"},qt=e("path",{d:"M511.267 197.258a14.995 14.995 0 00-12.107-10.209l-158.723-23.065-70.985-143.827a14.998 14.998 0 00-26.901 0l-70.988 143.827-158.72 23.065a14.998 14.998 0 00-8.312 25.585l114.848 111.954-27.108 158.083a14.999 14.999 0 0021.763 15.812l141.967-74.638 141.961 74.637a15 15 0 0021.766-15.813l-27.117-158.081 114.861-111.955a14.994 14.994 0 003.795-15.375z"},null,-1),Ht=[qt];function Xt(o,f){return l(),c("svg",Gt,Ht)}const ee=ne(Yt,[["render",Xt]]),Ft={class:"vue3-star-ratings__outer"},Zt={class:"vue3-star-ratings__inner"},Jt=ce({__name:"Vue3StarRatings",props:{modelValue:{default:0},numberOfStars:{default:5},starColor:{default:"#ff9800"},inactiveColor:{default:"#333333"},starSize:{default:24},disableClick:{type:Boolean},customSvg:{default:ee}},emits:["update:modelValue"],setup(o,{emit:f}){const n=o,C=L(()=>n.customSvg||ee),m={rounded(r,p){const g=Math.pow(10,p);return Math.round(r*g)/g}},h=O(),i=L({get(){return n.modelValue},set(r){const p=m.rounded(r,1);f("update:modelValue",p)}});function v(r){if(n.disableClick)return;const p=this.getBoundingClientRect(),{pageX:g}=r,w=g-p.left,b=p.width,a=n.numberOfStars,s=w/b*a;i.value=s}const y=L(()=>(i.value<0?0:i.value>n.numberOfStars?n.numberOfStars:i.value)/n.numberOfStars*100);return ue(()=>{var r;const p={"--vue3StarRatingsInnerColor":n.inactiveColor,"--vue3StarRatingsOuterColor":n.starColor,"--vue3StarRatingOuterWidth":`${y.value}%`,"--vue3StarRatingIconSize":`${n.starSize}px`};for(const[g,w]of Object.entries(p))(r=h.value)==null||r.style.setProperty(g,w)}),ae(()=>{var r;(r=h.value)==null||r.addEventListener("click",v)}),me(()=>{var r;(r=h.value)==null||r.removeEventListener("click",v)}),(r,p)=>(l(),c("div",{class:"vue3-star-ratings",ref_key:"starsContainer",ref:h,style:pe({pointerEvents:r.disableClick?"none":"auto"})},[e("div",Ft,[(l(!0),c(M,null,I(r.numberOfStars,g=>(l(),K(Q(C.value),{key:g,class:"vue3-star-ratings__icon"}))),128))]),e("div",Zt,[(l(!0),c(M,null,I(r.numberOfStars,g=>(l(),K(Q(C.value),{key:g,class:"vue3-star-ratings__icon"}))),128))])],4))}}),Kt=ne(Jt,[["__scopeId","data-v-7fab3f62"]]),Qt={class:"space-y-2 divide-y divide-slate-200"},es={class:"w-[72px] h-[95px]"},ts=["src"],ss={class:"flex flex-col gap-1 w-full relative"},as={class:"text-primary text-xs font-normal leading-none"},os={class:"flex justify-between items-center gap-2"},ns={class:"text-slate-950 text-base font-normal leading-normal"},rs=["onClick"],ls={key:1,class:"flex items-center gap-0"},is={class:"flex flex-wrap justify-between items-center gap-3"},ds={class:"flex items-center gap-1"},cs={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},us={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},ms={class:"text-slate-800 text-base font-normal leading-normal"},ps={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},fs={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},vs={class:"bg-white p-5 sm:p-8 relative"},gs={class:"text-xl font-semibold text-gray-800 mb-4"},hs={class:"flex justify-center items-center gap-3 mb-4"},ys={class:"text-gray-600 text-lg"},xs=["placeholder"],bs={class:"flex justify-end space-x-3 mt-4"},_s={__name:"OrderProducts",props:{order:Object,default:()=>{}},emits:["refresh"],setup(o,{emit:f}){const n=W(),C=N(),m=o,h=f,i=Y(),v=O(0),y=O(""),r=O(!1),p=O(""),g=b=>{p.value=b,v.value=0,y.value="",r.value=!0},w=()=>{if(v.value==0)return n.error("Please select rating",{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"}),!1;if(y.value=="")return n.error("Please enter message",{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"}),!1;axios.post("/product-review",{rating:v.value,description:y.value,order_id:m.order.id,product_id:p.value},{headers:{Authorization:`${C.token}`}}).then(b=>{n.success(b.data.message,{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"}),r.value=!1,h("refresh")}).catch(b=>{n.error(b.response.data.message,{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(b,a)=>(l(),c(M,null,[e("div",Qt,[(l(!0),c(M,null,I(o.order.products,s=>(l(),c("div",{key:s.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",es,[e("img",{src:s.thumbnail,class:"w-full h-full object-contain"},null,8,ts)]),e("div",ss,[e("div",as,t(s.brand),1),e("div",os,[e("div",ns,t(s.name),1),U(e("div",null,[s.rating?(l(),c("div",ls,[(l(),c(M,null,I(5,D=>e("span",{key:D},[u(d(oe),{class:te(["w-5 h-5",D<=s.rating?"text-amber-500":"text-slate-200"])},null,8,["class"])])),64))])):(l(),c("button",{key:0,class:"px-2 py-1 w-full sm:w-auto bg-amber-500 rounded-md md:rounded-lg text-white text-sm font-normal",onClick:D=>g(s.id)},t(b.$t("Review")),9,rs))],512),[[fe,o.order.order_status==="Delivered"]])]),e("div",is,[e("div",ds,[e("div",cs,t(s.size),1),e("div",us,t(s.color),1)]),e("div",ms,t(s.order_qty)+" X "+t(d(i).showCurrency(s.discount_price>0?s.discount_price:s.price)),1)])])]))),128))]),u(d(H),{as:"template",show:r.value},{default:k(()=>[u(d(G),{as:"div",class:"relative z-10",onClose:a[5]||(a[5]=s=>r.value=!1)},{default:k(()=>[u(d(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:k(()=>a[6]||(a[6]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-50 transition-opacity"},null,-1)])),_:1}),e("div",ps,[e("div",fs,[u(d(A),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:k(()=>[u(d(q),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all my-8 md:my-0 w-full sm:max-w-lg md:max-w-xl"},{default:k(()=>[e("div",vs,[e("div",{class:"w-9 h-9 bg-slate-100 rounded-[32px] absolute top-4 right-4 flex justify-center items-center cursor-pointer",onClick:a[0]||(a[0]=s=>r.value=!1)},[u(d(se),{class:"w-6 h-6 text-slate-600"})]),e("h2",gs,t(b.$t("Rate Your Experience")),1),e("div",hs,[u(d(Kt),{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=s=>v.value=s),"star-size":42,inactiveColor:"#cbd5e1"},null,8,["modelValue"]),e("div",ys,[e("span",null,t(b.$t("Rating"))+":",1),z(" "+t(v.value),1)])]),e("div",null,[a[7]||(a[7]=e("label",{for:"description"},"Message",-1)),U(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=s=>y.value=s),class:"border border-gray-300 p-2 w-full rounded focus:border-primary outline-none",rows:"4",placeholder:b.$t("Enter your description")},null,8,xs),[[ve,y.value]])]),e("div",bs,[e("button",{class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3.5 px-4 rounded-lg focus:outline-none flex-grow",onClick:a[3]||(a[3]=s=>r.value=!1)},t(b.$t("Cancel")),1),e("button",{class:"bg-primary hover:bg-primary-600 text-white font-semibold py-3.5 px-4 rounded-lg focus:outline-none flex-grow",onClick:a[4]||(a[4]=s=>w())},t(b.$t("Submit")),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}},ws={class:"bg-white px-3 text-slate-600 flex items-center gap-1 pt-2"},$s={class:"leading-normal"},ks={class:"px-2 pt-2 md:px-4 md:pt-4 lg:px-6 lg:pt-6"},Cs={class:"grid grid-cols-3 gap-4 md:gap-6 mt-4 p-3 md:p-4 xl:p-6 bg-white rounded-lg md:rounded-2xl"},Ps={class:"col-span-3 lg:col-span-2 bg-white rounded-lg md:rounded-2xl border border-slate-100 p-3 md:p-4 xl:p-6"},Os={class:"text-slate-500 text-xs md:text-base font-normal leading-none"},Ss={class:"flex items-center gap-3 mt-2"},js=["src"],Ds={class:"flex flex-wrap gap-2 justify-between items-start grow"},zs={class:"text-slate-950 text-sm md:text-base font-normal leading-tight"},Ms={class:"flex items-center gap-1"},Rs={class:"text-slate-800 text-xs md:text-base font-medium"},As={class:"text-slate-600 text-sm md:text-base font-normal leading-tight"},Is={class:"col-span-3 lg:col-span-1"},Ns={__name:"OrderDetails",setup(o){const f=N(),n=ge(),C=he(),m=O({});T(()=>f.orderCancel,()=>{f.orderCancel==!0&&h(),f.orderCancel=!1}),ae(()=>{h(),window.scrollTo(0,0,{behavior:"smooth"})});const h=async()=>{axios.get("/order-details",{params:{order_id:n.params.id},headers:{Authorization:f.token}}).then(i=>{m.value=i.data.data.order}).catch(i=>{i.response.status===401&&(f.token=null,f.user=null,f.addresses=[],f.favoriteProducts=0,C.push("/"))})};return(i,v)=>{var r,p,g,w;const y=ye("router-link");return l(),c("div",null,[e("div",ws,[u(d(we),{class:"w-5 h-5 md:w-6 md:h-6"}),u(y,{to:"/order-history",class:"leading-normal hover:text-primary"},{default:k(()=>[z(t(i.$t("Order History")),1)]),_:1}),e("span",$s,"/ "+t(i.$t("Order Details")),1)]),u(xe,{title:i.$t("Order Details")},null,8,["title"]),e("div",ks,[u(Be,{order:m.value},null,8,["order"]),e("div",Cs,[e("div",Ps,[e("div",Os,t(i.$t("Purchased from")),1),e("div",Ss,[e("img",{class:"w-9 h-9 md:w-12 md:h-12",src:(r=m.value.shop)==null?void 0:r.logo},null,8,js),e("div",Ds,[e("div",null,[e("div",zs,t((p=m.value.shop)==null?void 0:p.name),1),e("div",Ms,[u(d(oe),{class:"w-5 h-5 text-yellow-400"}),e("span",Rs,t((g=m.value.shop)==null?void 0:g.rating),1)])])])]),v[0]||(v[0]=e("div",{class:"w-full h-[0px] border-t border-slate-200 my-3"},null,-1)),e("div",As,t(i.$t("Products"))+" ("+t((w=m.value.products)==null?void 0:w.length)+") ",1),u(_s,{order:m.value,onRefresh:h},null,8,["order"])]),e("div",Is,[u(Wt,{order:m.value,"onUpdate:paymentSuccess":h},null,8,["order"])])])])])}}};export{Ns as default};
